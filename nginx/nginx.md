# Nginxについて
## 概要
NginxはWebサーバ、リバースプロキシ、キャッシュ、ロードバランシング、メディアストリーミングなど多くの機能を提供するOSS。<br />

HTTPサーバの機能に加えて、電子メール（IMAP、POP3、SMTP）のプロキシサーバ、HTTP/TCP/UDPサーバのリバースプロキシ/ロードバランサーとしても機能する。<br />

Nginxの特徴は以下のとおり。<br />
- 処理性能に重きが置かれている
- 高い並行処理性能を持つ
- メモリ使用量を抑制できる。


「並行処理を行いながらメモリの消費も抑制できる」という設計がNginxの肝。<br />
ここでいう並行処理とは、「1つの処理装置で信号を切り替えながら、複数の処理も実行するような処理」を指す。<br />
人間の目には信号の切り替えは見えないので、あたかも複数処理を同時に一つの処理装置がこなしているように見える。<br />



2021年度のWebサーバにおけるNginxのシェアは1位。それまでは「Apache」がシェア1位だった。<br />
Apacheも無料で使えるオープンソースWebサーバであり、2位だったNginxと長らく競争を続けてきた。<br />

Nginxを特化型だとすると、Apacheは汎用型のWebサーバである。<br />

例えば、WordPressに使われているPHPの処理はApacheのほうが得意となっている。<br />

ただしWeb業界の現状を考えるとNginxの処理性能の高さやメモリ消費量削減といったメリットが生きてくるようになっている。<br />
シェアが逆転したのもNginxのニーズがApacheのニーズを上回ったからであると言える。<br />


### NginxがApacheより優れている点
以下列挙できる。
- Apacheより処理速度が高い
- メモリ消費量を抑えやすい
- 大量の同時接続処理を素早く処理しやすい


Nginxは最初から処理性能が高くなるように設計されたWebサーバである。<br />
汎用性を犠牲にしている代わりに、Apacheよりも高速で各プロセスを処理し、ユーザへサービスを提供できる。<br />
Webサイトのレスポンスはユーザビリティを左右する重要な項目であり、SEO面でも影響があるのでおろそかにはできない。<br />
nginx導入によって将来的にWebサイトでつかうコンテンツが増加しても楽に対応可能である。<br />



また、Webサーバの負担を軽くできるのも大きなメリットの一つ。<br />
Apacheは物理的な処理リソースを占有しがちな点がデメリットとなっていた。現在ではインターネットユーザが増加しており、サーバがパンクする状況も珍しく無くなったが、リソースを占有しやすいApacheでは同時接続によってメモリがパンク、サーバ処理が止まってしまうリスクがある。<br />

Nginxでは少ないメモリ消費量で接続処理を済ませようとするため、Apacheのようにパンクしにくい。<br />


### NginxがApacheより苦手な点

以下のとおり苦手な部分もある。<br />

- 動画を多く扱うコンテンツの処理に不向き
- 機能追加がしにくい
- 初心者向けの設定情報が少ない

Nginxの特徴は高速処理だが、それは静的コンテンツに限定した時のこと。<br />
Nginxはメモリ消費量を抑制できるように設計されているが、CPUを直接大量に使うような動的な処理には向いていない。<br />
動的な処理というのは「PHPをふんだんにWebサイトに使っている」「動画コンテンツがメインになっている」といったケースで発生する。<br />

つまり上記のような事例ではメモリ処理重視のNginxではなく、CPU処理が得意なApacheのほうが向いている。<br />
近年ではインターネットユーザ画像かするとおもに動的な処理を行うニーズも増加しているのもポイントである。<br />
今後の展開によっては再びApacheがNginxを抜く可能性も０ではないと言える。<br />


また、Nginxは複数の処理を兼任させて運用させるような体制をとりにくい。<br />
汎用性が犠牲になっているデメリットが出てしまう。<br />
Apacheは汎用型なので「Webサーバとアプリケーションサーバを1つのソフトウェア内で共存させる」といったこともやりやすい。<br />
Nginxで同じ環境を構築する場合、サーバを用途ごとに用意する必要も出てくる。<br />


## Nginxの活用事例
以下のような活用事例がある。
- 運用合理化とセキュリティ性確保の両方を成功
- サービス・アプリケーションごとに細かく認証制御ができるようになる
- 高速で親鸞生の高いロードバランシングの獲得に成功


### 運用合理化とセキュリティ性確保の両方を成功


某広告プラットフォーム運用会社はアプリケーションの高度な処理とセキュリティ性確保の両立を課題として感じていた。<br />
そこで、Nginxを導入し目的を達成しようと動き出し、結果的にロードバランシングやドメイン制限といった各機能を活用しながら、コスト削減や柔軟性の向上といった効果を獲得できた。<br />


### サービス・アプリケーションごとに細かく認証制御ができるようになる

メディア運用や広告プラットフォーム提供などを行なっている某IT企業ではコロナ禍でリモートワーク移行に伴うセキュリティ確保などに苦戦していた。<br />
特にアクセス制御について課題を感じており、どうやってスムーズに変更や管理を行うかが悩みだった。<br />
そこでNginxに拡張機能を加えて外部からのアクセス制御を可能にするシステムを開発、テレワークへ活用した。<br />
結果として試用期間を経て実用化している。<br />


### 高速で信頼性の高いロードバランシングの獲得に成功
通信制御を行いデバイスの処理負担を行う技術を「ロードバランシング」と呼ぶ。<br />
某ソフトウェア企業では信頼性の高いロードバランシング用Webサーバを探していた。<br />
そこで他のロードバランサーと比較してもキャパシティの高いNginxを導入し、結果として低コストでヘルチェックといった機能を用いてアプリの稼働をスムーズに行えるようになった。<br />


## Nginx以外にもWebサーバはあるの？
Nginx以外にもWebサーバは多く存在する。<br />

例えば、Apacheだけでなく「IIS（Internet Information Services）」などもWebサーバの代表例である。<br />

## 参考文献
[knowledge](https://hnavi.co.jp/knowledge/blog/nginx/)<br />

